<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>دليل معالجة الصور باستخدام OpenCV و Python</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #3498db;
            --secondary-color: #2c3e50;
            --accent-color: #e74c3c;
            --light-color: #ecf0f1;
            --dark-color: #34495e;
            --success-color: #2ecc71;
            --code-bg: #2d2d2d;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: #333;
            line-height: 1.6;
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        
        header {
            background: linear-gradient(to right, var(--secondary-color), var(--primary-color));
            color: white;
            padding: 20px;
            text-align: center;
            position: relative;
        }
        
        .logo {
            position: absolute;
            left: 20px;
            top: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
        }
        
        .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
        }
        
        .main-content {
            display: flex;
            min-height: 700px;
        }
        
        .sidebar {
            width: 300px;
            background-color: var(--dark-color);
            color: white;
            padding: 20px 0;
            overflow-y: auto;
        }
        
        .sidebar h2 {
            padding: 0 20px 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .category {
            margin-bottom: 20px;
        }
        
        .category-title {
            padding: 10px 20px;
            background-color: rgba(0, 0, 0, 0.2);
            font-weight: bold;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .lessons-list {
            list-style: none;
            padding: 0;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }
        
        .category.active .lessons-list {
            max-height: 500px;
        }
        
        .lesson-item {
            padding: 12px 20px 12px 30px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            cursor: pointer;
            transition: background-color 0.2s;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .lesson-item:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }
        
        .lesson-item.active {
            background-color: var(--primary-color);
            font-weight: bold;
        }
        
        .content-area {
            flex: 1;
            padding: 25px;
            overflow-y: auto;
            background-color: #f9f9f9;
        }
        
        .lesson-header {
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--light-color);
        }
        
        .lesson-title {
            font-size: 1.8rem;
            color: var(--secondary-color);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .lesson-description {
            font-size: 1.1rem;
            color: #666;
            line-height: 1.7;
            margin-bottom: 20px;
        }
        
        .images-container {
            display: flex;
            gap: 20px;
            margin: 25px 0;
            flex-wrap: wrap;
        }
        
        .image-box {
            flex: 1;
            min-width: 300px;
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
            text-align: center;
        }
        
        .image-box h3 {
            margin-bottom: 12px;
            color: var(--secondary-color);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .image-placeholder {
            width: 100%;
            height: 250px;
            background: #eee;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #777;
            font-size: 1.1rem;
            overflow: hidden;
        }
        
        .image-placeholder img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .code-container {
            background: var(--code-bg);
            color: #f8f8f2;
            padding: 18px;
            border-radius: 8px;
            margin: 20px 0;
            overflow-x: auto;
            font-family: 'Consolas', monospace;
            position: relative;
        }
        
        .code-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .code-lang {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: bold;
        }
        
        .copy-btn {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.9rem;
        }
        
        .code-example {
            white-space: pre-wrap;
            line-height: 1.5;
        }
        
        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 2px solid var(--light-color);
        }
        
        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 6px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-primary {
            background: var(--primary-color);
            color: white;
        }
        
        .btn-primary:hover {
            background: #2980b9;
        }
        
        .btn-secondary {
            background: var(--light-color);
            color: var(--dark-color);
        }
        
        .btn-secondary:hover {
            background: #dde4e6;
        }
        
        .btn-disabled {
            background: #bdc3c7;
            color: #7f8c8d;
            cursor: not-allowed;
        }
        
        .parameters {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
        }
        
        .parameters h3 {
            margin-bottom: 15px;
            color: var(--secondary-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .param-item {
            margin-bottom: 12px;
            display: flex;
            align-items: center;
        }
        
        .param-item label {
            width: 150px;
            font-weight: bold;
        }
        
        .param-item input {
            flex: 1;
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        footer {
            text-align: center;
            padding: 20px;
            background: var(--secondary-color);
            color: white;
            font-size: 0.9rem;
        }
        
        .loading {
            text-align: center;
            padding: 40px;
            font-size: 1.2rem;
            color: #666;
        }
        
        @media (max-width: 900px) {
            .main-content {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                max-height: 300px;
            }
            
            .logo {
                position: relative;
                left: 0;
                top: 0;
                justify-content: center;
                margin-bottom: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <i class="fab fa-python fa-2x"></i>
                <span>OpenCV</span>
            </div>
            <h1>دليل معالجة الصور باستخدام OpenCV و Python</h1>
            <p class="subtitle">شرح مفصل للفلاتر، التحولات الهندسية، وخوارزميات معالجة الصور</p>
        </header>
        
        <div class="main-content">
            <div class="sidebar" id="sidebar">
                <h2><i class="fas fa-book"></i> الدروس</h2>
                <!-- سيتم ملؤها بواسطة JavaScript -->
            </div>
            
            <div class="content-area" id="contentArea">
                <div class="lesson-header">
                    <h2 class="lesson-title"><i class="fas fa-graduation-cap"></i> مرحباً بك في دليل OpenCV</h2>
                    <p class="lesson-description">اختر درساً من القائمة الجانبية لبدء التعلم. هذا الدليل يقدم شرحاً شاملاً لتقنيات معالجة الصور باستخدام OpenCV مع Python.</p>
                </div>
                
                <div class="images-container">
                    <div class="image-box">
                        <h3><i class="fas fa-image"></i> الصورة الأصلية</h3>
                        <div class="image-placeholder">سيظهر هنا الصورة الأصلية</div>
                    </div>
                    <div class="image-box">
                        <h3><i class="fas fa-magic"></i> الصورة بعد المعالجة</h3>
                        <div class="image-placeholder">سيظهر هنا نتيجة المعالجة</div>
                    </div>
                </div>
                
                <div class="code-container">
                    <div class="code-header">
                        <div class="code-lang">
                            <i class="fab fa-python"></i> Python
                        </div>
                        <button class="copy-btn">
                            <i class="fas fa-copy"></i> نسخ الكود
                        </button>
                    </div>
                    <div class="code-example">
# سيظهر هنا كود المثال
                    </div>
                </div>
                
                <div class="navigation">
                    <button class="btn btn-secondary btn-disabled" id="prevBtn">
                        <i class="fas fa-arrow-right"></i> الدرس السابق
                    </button>
                    <button class="btn btn-primary" id="nextBtn">
                        الدرس التالي <i class="fas fa-arrow-left"></i>
                    </button>
                </div>
            </div>
        </div>
        
        <footer>
            <p>تم إنشاء هذا الدليل باستخدام HTML, CSS, JavaScript و Python</p>
        </footer>
    </div>

    <script>
        // بيانات الدروس (في الواقع سيتم تحميلها من ملف JSON)
        const lessonsData = {
            "categories": [
                {
                    "id": "filters",
                    "name": "الفلاتر",
                    "icon": "fas fa-filter",
                    "lessons": [
                        {
                            "id": "gaussian",
                            "title": "المرشح الغاوسي",
                            "icon": "fas fa-cloud",
                            "description": "يستخدم المرشح الغاوسي لتخفيف الضوضاء وتنعيم الصورة. يعمل عن طريق تحويل كل بكسل بقيم متوسطة مرجحة للبكسلات المحيطة، باستخدام توزيع غاوسي.",
                            "code": `# تطبيق المرشح الغاوسي
import cv2
import numpy as np

# تحميل الصورة
img = cv2.imread('image.jpg')

# تطبيق المرشح الغاوسي
blur = cv2.GaussianBlur(img, (5, 5), 0)

# عرض الصورة
cv2.imshow('Original', img)
cv2.imshow('Gaussian Blur', blur)
cv2.waitKey(0)
cv2.destroyAllWindows()`,
                            "image_before": "https://images.unsplash.com/photo-1541701494587-cb58502866ab?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80",
                            "image_after": "https://images.unsplash.com/photo-1567095761054-7a02e69e5c43?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=687&q=80",
                            "parameters": {
                                "kernel_size": "5x5",
                                "sigmaX": 0,
                                "sigmaY": 0
                            }
                        },
                        {
                            "id": "median",
                            "title": "المرشح الوسيط",
                            "icon": "fas fa-chart-line",
                            "description": "يستبدل المرشح الوسيط قيمة كل بكسل بالوسيط الإحصائي للبكسلات المحيطة. فعال جدًا في إزالة الضوضاء 'الملح والفلفل' مع الحفاظ على الحواف.",
                            "code": `# تطبيق المرشح الوسيط
import cv2
import numpy as np

# تحميل الصورة
img = cv2.imread('image.jpg')

# تطبيق المرشح الوسيط
median = cv2.medianBlur(img, 5)

# عرض الصورة
cv2.imshow('Original', img)
cv2.imshow('Median Blur', median)
cv2.waitKey(0)
cv2.destroyAllWindows()`,
                            "image_before": "https://images.unsplash.com/photo-1579546929662-711aa81148cf?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80",
                            "image_after": "https://images.unsplash.com/photo-1612240498936-65f510cf5d31?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80",
                            "parameters": {
                                "kernel_size": 5
                            }
                        },
                        {
                            "id": "bilateral",
                            "title": "المرشح الثنائي",
                            "icon": "fas fa-exchange-alt",
                            "description": "مرشح غير خطي يحافظ على الحواف أثناء إزالة الضوضاء. يجمع بين نطاقي المسافة واللون للحفاظ على الحواف الحادة.",
                            "code": `# تطبيق المرشح الثنائي
import cv2
import numpy as np

# تحميل الصورة
img = cv2.imread('image.jpg')

# تطبيق المرشح الثنائي
bilateral = cv2.bilateralFilter(img, 9, 75, 75)

# عرض الصورة
cv2.imshow('Original', img)
cv2.imshow('Bilateral Filter', bilateral)
cv2.waitKey(0)
cv2.destroyAllWindows()`,
                            "image_before": "https://images.unsplash.com/photo-1504198322250-d5fd0426f5f5?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1172&q=80",
                            "image_after": "https://images.unsplash.com/photo-1612299273043-9cdc4c36eaf0?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80",
                            "parameters": {
                                "d": 9,
                                "sigmaColor": 75,
                                "sigmaSpace": 75
                            }
                        }
                    ]
                },
                {
                    "id": "geometric",
                    "name": "التحولات الهندسية",
                    "icon": "fas fa-crop-alt",
                    "lessons": [
                        {
                            "id": "rotation",
                            "title": "تدوير الصورة",
                            "icon": "fas fa-sync",
                            "description": "تدوير الصورة بزاوية محددة حول نقطة مركزية. يمكن تحديد نقطة مركز التدوير وضبط حجم الصورة الناتجة.",
                            "code": `# تدوير الصورة
import cv2
import numpy as np

# تحميل الصورة
img = cv2.imread('image.jpg')
height, width = img.shape[:2]

# حساب مصفوفة التدوير
center = (width // 2, height // 2)
rotation_matrix = cv2.getRotationMatrix2D(center, 45, 1.0)

# تطبيق التدوير
rotated = cv2.warpAffine(img, rotation_matrix, (width, height))

# عرض الصورة
cv2.imshow('Original', img)
cv2.imshow('Rotated', rotated)
cv2.waitKey(0)
cv2.destroyAllWindows()`,
                            "image_before": "https://images.unsplash.com/photo-1541963463532-d68292c34b19?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80",
                            "image_after": "https://images.unsplash.com/photo-1587502536575-6dfba0a6e017?ixlib=rb-4.0.3&ixid=MnwxMjA3fDF8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80",
                            "parameters": {
                                "angle": 45,
                                "scale": 1.0
                            }
                        },
                        {
                            "id": "scaling",
                            "title": "تحجيم الصورة",
                            "icon": "fas fa-expand-arrows-alt",
                            "description": "تغيير حجم الصورة مع الحفاظ على النسبة أو بدونها. يمكن استخدام طرق مختلفة للاستيفاء مثل INTER_LINEAR أو INTER_NEAREST.",
                            "code": `# تحجيم الصورة
import cv2
import numpy as np

# تحميل الصورة
img = cv2.imread('image.jpg')

# تحجيم الصورة
resized = cv2.resize(img, (640, 480), interpolation=cv2.INTER_LINEAR)

# عرض الصورة
cv2.imshow('Original', img)
cv2.imshow('Resized', resized)
cv2.waitKey(0)
cv2.destroyAllWindows()`,
                            "image_before": "https://images.unsplash.com/photo-1541963463532-d68292c34b19?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80",
                            "image_after": "https://images.unsplash.com/photo-1587502537104-aac10f5fb6f7?ixlib=rb-4.0.3&ixid=MnwxMjA3fDF8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1171&q=80",
                            "parameters": {
                                "width": 640,
                                "height": 480,
                                "interpolation": "INTER_LINEAR"
                            }
                        }
                    ]
                },
                {
                    "id": "features",
                    "name": "اكتشاف الميزات",
                    "icon": "fas fa-search",
                    "lessons": [
                        {
                            "id": "sift",
                            "title": "خوارزمية SIFT",
                            "icon": "fas fa-fingerprint",
                            "description": "SIFT (Scale-Invariant Feature Transform) هي خوارزمية لاكتشاف الميزات وتحسسها للتغيرات في الحجم والدوران. تعتمد على إنشاء دوال غاوسية بمقاييس مختلفة.",
                            "code": `# اكتشاف الميزات باستخدام SIFT
import cv2
import numpy as np

# تحميل الصورة
img = cv2.imread('image.jpg')
gray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)

# إنشاء كائن SIFT
sift = cv2.SIFT_create()

# اكتشاف الميزات ووصفها
keypoints, descriptors = sift.detectAndCompute(gray, None)

# رسم الميزات على الصورة
img_with_keypoints = cv2.drawKeypoints(img, keypoints, None, flags=cv2.DRAW_MATCHES_FLAGS_DRAW_RICH_KEYPOINTS)

# عرض الصورة
cv2.imshow('SIFT Features', img_with_keypoints)
cv2.waitKey(0)
cv2.destroyAllWindows()`,
                            "image_before": "https://images.unsplash.com/photo-1579546929662-711aa81148cf?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80",
                            "image_after": "https://images.unsplash.com/photo-1612299273043-9cdc4c36eaf0?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80",
                            "parameters": {
                                "nFeatures": 0,
                                "nOctaveLayers": 3,
                                "contrastThreshold": 0.04
                            }
                        },
                        {
                            "id": "orb",
                            "title": "خوارزمية ORB",
                            "icon": "fas fa-star",
                            "description": "ORB (Oriented FAST and Rotated BRIEF) هي خوارزمية سريعة لاكتشاف الميزات ووصفها. تجمع بين ميزات FAST لاكتشاف النقاط المميزة وميزات BRIEF للوصف، مع إضافة اتجاه للتغلب على مشكلة الدوران.",
                            "code": `# اكتشاف الميزات باستخدام ORB
import cv2
import numpy as np

# تحميل الصورة
img = cv2.imread('image.jpg')
gray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)

# إنشاء كائن ORB
orb = cv2.ORB_create()

# اكتشاف الميزات ووصفها
keypoints, descriptors = orb.detectAndCompute(gray, None)

# رسم الميزات على الصورة
img_with_keypoints = cv2.drawKeypoints(img, keypoints, None, color=(0, 255, 0), flags=0)

# عرض الصورة
cv2.imshow('ORB Features', img_with_keypoints)
cv2.waitKey(0)
cv2.destroyAllWindows()`,
                            "image_before": "https://images.unsplash.com/photo-1541701494587-cb58502866ab?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80",
                            "image_after": "https://images.unsplash.com/photo-1567095761054-7a02e69e5c43?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=687&q=80",
                            "parameters": {
                                "nFeatures": 500,
                                "scaleFactor": 1.2,
                                "nLevels": 8
                            }
                        }
                    ]
                }
            ]
        };

        // متغيرات التطبيق
        let currentCategoryIndex = 0;
        let currentLessonIndex = 0;
        
        // عناصر DOM
        const sidebarElement = document.getElementById('sidebar');
        const contentAreaElement = document.getElementById('contentArea');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        
        // تحميل وبناء واجهة الدروس
        function loadLessons() {
            // بناء القائمة الجانبية
            let sidebarHTML = '<h2><i class="fas fa-book"></i> الدروس</h2>';
            
            lessonsData.categories.forEach((category, catIndex) => {
                sidebarHTML += `
                    <div class="category ${catIndex === 0 ? 'active' : ''}" data-category="${catIndex}">
                        <div class="category-title">
                            <span><i class="${category.icon}"></i> ${category.name}</span>
                            <span>▼</span>
                        </div>
                        <ul class="lessons-list">
                `;
                
                category.lessons.forEach((lesson, lessonIndex) => {
                    sidebarHTML += `
                        <li class="lesson-item ${catIndex === 0 && lessonIndex === 0 ? 'active' : ''}" 
                            data-category="${catIndex}" data-lesson="${lessonIndex}">
                            <i class="${lesson.icon}"></i> ${lesson.title}
                        </li>
                    `;
                });
                
                sidebarHTML += `</ul></div>`;
            });
            
            sidebarElement.innerHTML = sidebarHTML;
            
            // إضافة event listeners للدروس
            document.querySelectorAll('.category-title').forEach(title => {
                title.addEventListener('click', function() {
                    const category = this.parentElement;
                    category.classList.toggle('active');
                });
            });
            
            document.querySelectorAll('.lesson-item').forEach(item => {
                item.addEventListener('click', function() {
                    const categoryIndex = parseInt(this.getAttribute('data-category'));
                    const lessonIndex = parseInt(this.getAttribute('data-lesson'));
                    
                    // تحديث حالة العنصر النشط
                    document.querySelectorAll('.lesson-item').forEach(i => i.classList.remove('active'));
                    this.classList.add('active');
                    
                    // تحميل محتوى الدرس
                    loadLessonContent(categoryIndex, lessonIndex);
                });
            });
            
            // تحميل أول درس افتراضيًا
            if (lessonsData.categories.length > 0 && lessonsData.categories[0].lessons.length > 0) {
                loadLessonContent(0, 0);
            }
            
            // إعداد أزرار التنقل
            setupNavigation();
            
            // إضافة وظيفة نسخ الكود
            setupCodeCopy();
        }
        
        // تحميل محتوى الدرس
        function loadLessonContent(categoryIndex, lessonIndex) {
            currentCategoryIndex = categoryIndex;
            currentLessonIndex = lessonIndex;
            
            const category = lessonsData.categories[categoryIndex];
            const lesson = category.lessons[lessonIndex];
            
            // تحديث واجهة المحتوى
            contentAreaElement.innerHTML = `
                <div class="lesson-header">
                    <h2 class="lesson-title"><i class="${lesson.icon}"></i> ${lesson.title}</h2>
                    <p class="lesson-description">${lesson.description}</p>
                </div>
                
                <div class="images-container">
                    <div class="image-box">
                        <h3><i class="fas fa-image"></i> الصورة الأصلية</h3>
                        <div class="image-placeholder">
                            <img src="${lesson.image_before}" alt="الصورة الأصلية">
                        </div>
                    </div>
                    <div class="image-box">
                        <h3><i class="fas fa-magic"></i> الصورة بعد المعالجة</h3>
                        <div class="image-placeholder">
                            <img src="${lesson.image_after}" alt="الصورة بعد المعالجة">
                        </div>
                    </div>
                </div>
                
                ${lesson.parameters ? `
                <div class="parameters">
                    <h3><i class="fas fa-sliders-h"></i> بارامترات ${lesson.title}</h3>
                    ${Object.entries(lesson.parameters).map(([key, value]) => `
                        <div class="param-item">
                            <label for="param-${key}">${key}:</label>
                            <input type="text" id="param-${key}" value="${value}" readonly>
                        </div>
                    `).join('')}
                </div>
                ` : ''}
                
                <div class="code-container">
                    <div class="code-header">
                        <div class="code-lang">
                            <i class="fab fa-python"></i> Python
                        </div>
                        <button class="copy-btn">
                            <i class="fas fa-copy"></i> نسخ الكود
                        </button>
                    </div>
                    <div class="code-example">${lesson.code}</div>
                </div>
                
                <div class="navigation">
                    <button class="btn ${hasPreviousLesson() ? 'btn-secondary' : 'btn-disabled'}" id="prevBtn">
                        <i class="fas fa-arrow-right"></i> الدرس السابق
                    </button>
                    <button class="btn ${hasNextLesson() ? 'btn-primary' : 'btn-disabled'}" id="nextBtn">
                        الدرس التالي <i class="fas fa-arrow-left"></i>
                    </button>
                </div>
            `;
            
            // إعادة إعداد أزرار التنقل
            setupNavigation();
            
            // إعادة إعداد وظيفة نسخ الكود
            setupCodeCopy();
        }
        
        // إعداد وظيفة نسخ الكود
        function setupCodeCopy() {
            const copyBtn = document.querySelector('.copy-btn');
            if (copyBtn) {
                copyBtn.addEventListener('click', function() {
                    const code = document.querySelector('.code-example').textContent;
                    navigator.clipboard.writeText(code).then(() => {
                        const originalText = this.innerHTML;
                        this.innerHTML = '<i class="fas fa-check"></i> تم النسخ!';
                        setTimeout(() => {
                            this.innerHTML = originalText;
                        }, 2000);
                    });
                });
            }
        }
        
        // التحقق من وجود درس سابق
        function hasPreviousLesson() {
            if (currentLessonIndex > 0) return true;
            if (currentCategoryIndex > 0) return true;
            return false;
        }
        
        // التحقق من وجود درس تالي
        function hasNextLesson() {
            const currentCategory = lessonsData.categories[currentCategoryIndex];
            
            if (currentLessonIndex < currentCategory.lessons.length - 1) return true;
            if (currentCategoryIndex < lessonsData.categories.length - 1) return true;
            return false;
        }
        
        // الانتقال للدرس السابق
        function goToPreviousLesson() {
            if (currentLessonIndex > 0) {
                // الانتقال للدرس السابق في نفس الفئة
                loadLessonContent(currentCategoryIndex, currentLessonIndex - 1);
            } else if (currentCategoryIndex > 0) {
                // الانتقال للفئة السابقة والدرس الأخير فيها
                const prevCategory = lessonsData.categories[currentCategoryIndex - 1];
                loadLessonContent(currentCategoryIndex - 1, prevCategory.lessons.length - 1);
            }
        }
        
        // الانتقال للدرس التالي
        function goToNextLesson() {
            const currentCategory = lessonsData.categories[currentCategoryIndex];
            
            if (currentLessonIndex < currentCategory.lessons.length - 1) {
                // الانتقال للدرس التالي في نفس الفئة
                loadLessonContent(currentCategoryIndex, currentLessonIndex + 1);
            } else if (currentCategoryIndex < lessonsData.categories.length - 1) {
                // الانتقال للفئة التالية والدرس الأول فيها
                loadLessonContent(currentCategoryIndex + 1, 0);
            }
        }
        
        // إعداد أزرار التنقل
        function setupNavigation() {
            // إزالة event listeners السابقة
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            
            if (prevBtn && nextBtn) {
                const newPrevBtn = prevBtn.cloneNode(true);
                const newNextBtn = nextBtn.cloneNode(true);
                
                prevBtn.parentNode.replaceChild(newPrevBtn, prevBtn);
                nextBtn.parentNode.replaceChild(newNextBtn, nextBtn);
                
                // إضافة event listeners جديدة
                newPrevBtn.addEventListener('click', function() {
                    if (hasPreviousLesson()) {
                        goToPreviousLesson();
                    }
                });
                
                newNextBtn.addEventListener('click', function() {
                    if (hasNextLesson()) {
                        goToNextLesson();
                    }
                });
            }
        }
        
        // بدء تحميل الدروس عند تحميل الصفحة
        document.addEventListener('DOMContentLoaded', function() {
            loadLessons();
        });
    </script>
</body>
</html>